<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cadastro ‚Ä¢ Palpites IA</title>

<style>
    body {
        margin: 0;
        padding: 0;
        background: #000000;
        font-family: 'Segoe UI', Tahoma, sans-serif;
        color: #ffffff;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .container {
        width: 380px;
        padding: 30px 30px;
        background: rgba(15, 15, 15, 0.9);
        border-radius: 20px;
        border: 2px solid #00ff88;
        box-shadow: 0 0 25px #00ff88;
        text-align: center;
    }

    /* üî• C√çRCULO NEON */
    .bola-neon {
        width: 130px;
        height: 130px;
        margin: 0 auto 15px;
        border-radius: 50%;
        border: 6px solid rgba(0,255,136,0.2);
        border-top-color: #00ff88;
        animation: spin 1.8s linear infinite;
        box-shadow: 0 0 20px #00ff88;
        position: relative;
    }

    @keyframes spin { to { transform: rotate(360deg); } }

    .icone-raio {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 55px;
        height: 55px;
        transform: translate(-50%, -50%);
        filter: drop-shadow(0 0 15px #00ff88);
    }

    h1 {
        font-size: 28px;
        margin-bottom: 20px;
        color: #00ff88;
        text-shadow: 0 0 15px #00ff88;
    }

    .input-group {
        text-align: left;
        margin-bottom: 14px;
    }

    .input-group label {
        font-size: 14px;
        color: #cccccc;
    }

    .input-group input {
        width: 100%;
        padding: 12px;
        border-radius: 10px;
        border: 2px solid #00ff88;
        background: #0f0f0f;
        color: #ffffff;
        font-size: 15px;
        outline: none;
        transition: all 0.3s ease;
    }

    .input-group input:focus {
        box-shadow: 0 0 12px #00ff88;
    }

    .botao {
        width: 100%;
        padding: 15px;
        background: #00ff88;
        color: #000;
        border: none;
        border-radius: 10px;
        font-size: 17px;
        font-weight: bold;
        cursor: pointer;
        margin-top: 10px;
        box-shadow: 0 0 15px #00ff88;
    }

    .botao:hover {
        transform: translateY(-3px);
    }

    .link {
        margin-top: 18px;
        display: block;
        font-size: 15px;
        color: #00ff88;
    }
</style>
</head>
<body>

<div class="container">

    <!-- C√çRCULO + RAIO -->
    <div class="bola-neon">
        <img src="/static/img/raio.png" class="icone-raio">
    </div>

    <h1>Palpites IA</h1>

    <form id="formCadastro" onsubmit="return registrar(event)">

        <div class="input-group">
            <label>Nome Completo</label>
            <input type="text" id="nome" required>
        </div>

        <div class="input-group">
            <label>CPF</label>
            <input type="text" id="cpf" placeholder="000.000.000-00" maxlength="14" required>
        </div>

        <div class="input-group">
            <label>Email</label>
            <input type="email" id="email" required>
        </div>

        <div class="input-group">
            <label>Telefone</label>
            <input type="text" id="telefone" placeholder="(DDD) 00000-0000" maxlength="15" required>
        </div>

        <div class="input-group">
            <label>Senha</label>
            <input type="password" id="senha" required>
        </div>

        <button class="botao" type="submit">Criar Conta</button>

        <a class="link" href="/login">J√° tenho conta</a>

    </form>

</div>

<script>
/* M√ÅSCARA CPF */
document.getElementById("cpf").addEventListener("input", (e) => {
    let v = e.target.value.replace(/\D/g, "");
    v = v.replace(/(\d{3})(\d)/, "$1.$2");
    v = v.replace(/(\d{3})(\d)/, "$1.$2");
    v = v.replace(/(\d{3})(\d{1,2})$/, "$1-$2");
    e.target.value = v;
});

/* M√ÅSCARA TELEFONE */
document.getElementById("telefone").addEventListener("input", (e) => {
    let v = e.target.value.replace(/\D/g, "");
    v = v.replace(/^(\d{2})(\d)/g, "($1) $2");
    v = v.replace(/(\d{5})(\d)/, "$1-$2");
    e.target.value = v;
});

/* ENVIAR DADOS AO BACKEND */
async function registrar(e) {
    e.preventDefault();

    const nome = document.getElementById("nome").value;
    const cpf = document.getElementById("cpf").value;
    const email = document.getElementById("email").value;
    const telefone = document.getElementById("telefone").value;
    const senha = document.getElementById("senha").value;

    const req = await fetch("/api/register", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({
            nome, cpf, email, telefone, password: senha
        })
    });

    const res = await req.json();

    if (res.status === "ok") {
        alert("Conta criada! Verifique seu e-mail.");
        window.location.href = "/confirmar";
    } else {
        alert(res.msg);
    }
}
</script>

</body>
</html>
